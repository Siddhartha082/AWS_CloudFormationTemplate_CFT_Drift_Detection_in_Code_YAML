
# A very interesting Topic on code drift detection methodolgy in  Cloud Formation Template with S3 Bucket System

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/621946c8-c0ed-4c77-8bab-ca4e03311aee)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/66f9e0aa-1bea-4f2d-ab6b-bb467c24988a)

# Ref

https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/detect-drift-stack.html

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/3cbe991d-e40e-4054-98ee-78acd9c3fa01)

# Sample 

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/8f123182-4e64-4d00-9542-c4052e94b934)

# start  - https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-formats.html

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/65b02048-5c35-4eda-a50d-006f24a281e8)

#https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-anatomy.html

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/bfb9fc23-cb19-4aaf-9e4d-94d245e402b2)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/0246c8a3-61a7-4b42-882f-f83e04dad6f1)

# # Practical

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/34c62eb8-0866-4e04-8816-c1cbcd8e3b0e)

# Create Template

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/8d4cc5f6-30c3-4a57-9985-448fdb9e6842)

# Template 

#https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-reference.html

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/2fed1206-4d48-4ccb-847e-bcda70182581)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/f629aa62-a75c-4e53-8d8e-716ed8f54fd2)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/c8d09319-ad81-4be1-b7b6-d4284994fe4f)


# Go to  Amazon Create – EC2 instance – Select YAML File – Syntax 

# https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-instance.html

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/2f77da2a-d958-4576-9c38-bae077b0cf35)

# Select s3

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/92379cb5-dd73-4c2a-8cad-c31f8e998a21)

# now change Code in Yaml format

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/7bf54bec-88e1-4db7-95d3-b63d9e94abb2)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/d8811c7c-40d1-4d58-8221-174b5cf77bab)

# https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-s3-bucket.html

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/9d86a440-2c79-4647-aa26-06a4300f98f3)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/3e0db535-6779-44b1-83bd-a1ab135731d6)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/02c7650a-75ef-4b82-baad-3f3af031f8f4)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/bdc4493e-321b-46a3-bc2c-3505f867fd61)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/1f2316e2-b803-47f3-9e81-15bb0f906cb6)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/74a49d35-fe32-4d0e-b808-9b349fae89c7)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/af66773c-44c2-4a48-81a3-07bc6264182f)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/f400dfd7-b99d-49ee-ace3-64d6782b7163)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/34117305-6907-4bbf-b168-467127c5f4da)

# check Event 

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/7145321c-385c-4db9-bbc9-7775f94d1b1e)

# Now check in Aws S3 console for verification

# Valid in S3

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/f2516bc4-9f26-400a-980e-82c443712d6e)


# # Another Bucket ( with enable Versioning Configuration -- added in S3_bucket-demo  yaml file )

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/0fd812dd-346a-4885-816f-65eee32922f5)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/744c408b-6f99-4474-9cfb-693cc24c0db1)

# Drift Detection proces

# Go to AWS :: s3: Version  Confirguration

https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket-versioningconfiguration.html


![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/71fa74b6-3c71-4e89-a590-b2e0b9f86178)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/e650495d-7066-4a06-a534-4c94e2fcf095)


# now the Testing Start – Drift Detection

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/2e118dd5-7afd-4e9e-b0d4-fb26245e3491)

# code

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/42d3ea8a-04a6-4342-a878-1df513692a59)


# in s3 Console

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/aa0b1cf8-fe4f-430b-9205-22587292746a)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/3f796c60-a436-415c-a05e-a5244ac6cb8b)


# Now the Drift 

Go to AWS S3 properties &  Change the Bucket versioning – suspect

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/93727027-15c1-4e0b-a7ea-2dcf39e57285)


# Check the status & changes made from the stack to s3 Buckets 

# Go to the stack & detect – Drift detection initiated 

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/a2b91921-cf05-4d52-905b-de9d5363377f)


# View  Drift Detection


![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/3b666b1c-babd-4746-8ec0-28e38335f671)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/3cbe5d89-59dc-42e8-9212-c14c88afd196)

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/6ad6a3b4-b6de-49ff-b198-aa56268c65be)

# Zoom  View

![image](https://github.com/Siddhartha082/AWS_CloudFormation_Template_Drift_Detection_in_Code_YAML/assets/110781138/c4417ed5-388d-427e-8d1f-c2f8761147b4)




























